<div class="wrapper">
  <app-side-nav></app-side-nav>
  <div class="content-wrapper">
    <mat-toolbar>
      <mat-toolbar-row class="toolbar-wrapper">
        <div *ngIf="activity$ | async as activity" class="toolbar">
          <div class="distance">
            <svg class="activity-type" *ngIf="activity.type === 'Run'" 
            fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"/></svg>
            <svg class="activity-type" *ngIf="activity.type === 'Ride'" 
            fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5zm5.8-10l2.4-2.4.8.8c1.3 1.3 3 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5l-1.9-1.9c-.5-.4-1-.6-1.6-.6s-1.1.2-1.4.6L7.8 8.4c-.4.4-.6.9-.6 1.4 0 .6.2 1.1.6 1.4L11 14v5h2v-6.2l-2.2-2.3zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zm0 8.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5-1.6 3.5-3.5 3.5z"/></svg>
            <svg class="activity-type" *ngIf="activity.type === 'Swim'" fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M22 21c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.46.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.46.27-1.08.64-2.19.64-1.11 0-1.73-.37-2.18-.64-.37-.23-.6-.36-1.15-.36s-.78.13-1.15.36c-.46.27-1.08.64-2.19.64v-2c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64 1.11 0 1.73.37 2.18.64.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.23.59.36 1.15.36v2zm0-4.5c-1.11 0-1.73-.37-2.18-.64-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36-.56 0-.78.13-1.15.36-.45.27-1.07.64-2.18.64s-1.73-.37-2.18-.64c-.37-.22-.6-.36-1.15-.36s-.78.13-1.15.36c-.47.27-1.09.64-2.2.64v-2c.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36.56 0 .78-.13 1.15-.36.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36s.78-.13 1.15-.36c.45-.27 1.07-.64 2.18-.64s1.73.37 2.18.64c.37.22.6.36 1.15.36v2zM8.67 12c.56 0 .78-.13 1.15-.36.46-.27 1.08-.64 2.19-.64 1.11 0 1.73.37 2.18.64.37.22.6.36 1.15.36s.78-.13 1.15-.36c.12-.07.26-.15.41-.23L10.48 5C8.93 3.45 7.5 2.99 5 3v2.5c1.82-.01 2.89.39 4 1.5l1 1-3.25 3.25c.31.12.56.27.77.39.37.23.59.36 1.15.36z"/>
              <circle cx="16.5" cy="5.5" r="2.5"/>
              <path d="M0 0h24v24H0z" fill="none"/></svg>
            <span>Distance: {{activity.distance_miles}}mi</span>
          </div>
          <span>Pace: {{activity.average_pace}}/mi</span>
          <span>Moving Time: {{activity.moving_time}}</span>
          <span>Calories: {{activity.calories}}</span>
        </div>
      </mat-toolbar-row>
    </mat-toolbar>

    <div *ngIf="activity$ | async as activity" class="activity">
      <h3>{{activity.distance_miles}} mile {{activity.type.toLowerCase()}} on {{activity.start_date | date: 'M/d/yy'}}
          at {{activity.start_date | date: 'h:mma' | lowercase}}
      </h3>

      <section class="table-map-section">
        <div class="table-map-wrapper">
          <div class="table-container mat-elevation-z8">
              <mat-table #table [dataSource]="dataSource">
                  <ng-container matColumnDef="split">
                      <mat-header-cell *matHeaderCellDef> Split </mat-header-cell>
                      <mat-cell *matCellDef="let element"> {{element.split}} </mat-cell>
                    </ng-container>
                <ng-container matColumnDef="distance_miles">
                  <mat-header-cell *matHeaderCellDef> Distance </mat-header-cell>
                  <mat-cell *matCellDef="let element"> {{element.distance_miles}}mi </mat-cell>
                </ng-container>
                <ng-container matColumnDef="pace">
                  <mat-header-cell *matHeaderCellDef> Pace </mat-header-cell>
                  <mat-cell *matCellDef="let element"> {{element.pace}} </mat-cell>
                </ng-container>
                <ng-container matColumnDef="elevation_difference">
                  <mat-header-cell *matHeaderCellDef> Elevation </mat-header-cell>
                  <mat-cell *matCellDef="let element"> {{element.elevation_difference}} </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
              </mat-table>
          </div>
          <div class="map">
            <agm-map [zoom]=15 [latitude]="startLatLong[0]" [longitude]="endLatLong[1]">
              <agm-polyline
              [visible]="true"
              [strokeWeight]="3"
              [strokeColor]="strokeColor"
              *ngIf="coordinates">
                <agm-polyline-point
                *ngFor="let coordinate of coordinates; let i=index"
                [latitude]="coordinate[0]"
                [longitude]="coordinate[1]">
                </agm-polyline-point>
              </agm-polyline>
            </agm-map>
          </div>
        </div>
      </section>
      <div *ngIf="chartIsLoaded" class="line-chart-wrapper">
        <canvas baseChart
                    [datasets]="lineChartData"
                    [labels]="lineChartLabels"
                    [options]="lineChartOptions"
                    [colors]="lineChartColors"
                    [legend]="lineChartLegend"
                    [chartType]="lineChartType">
          </canvas>
      </div>
        <button mat-raised-button color="accent" (click)="this.goToActivities(activity)">Back</button>
    </div>
  </div>
</div>
